<link rel="import" href="../../bower_components/paper-dialog/paper-action-dialog.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input-decorator.html">
<link rel="import" href="../../bower_components/ajax-form/ajax-form.html">
<link rel="import" href="../../bower_components/file-input/file-input.html">
<link rel="import" href="../../bower_components/core-icon/core-icon.html">

<polymer-element name="upload-dialog">
  <template>
    <link rel="stylesheet" href="../../stylesheets/application.css" shim-shadowdom>
    <paper-action-dialog id="upload" heading="Upload art">
      <form is="ajax-form" action="/api/art" method="post" id="uploadForm" enctype="multipart/form-data" on-submitted="{{ submitted }}" on-invalid="{{ invalid }}">
        <paper-input-decorator floatingLabel label="Title" style="width: 350px;">
          <input required type="text" is="core-input" name="title" on-keypress="{{ keypressHandler }}">
        </paper-input-decorator>
        <paper-input-decorator floatingLabel label="Author (optional)" style="width: 350px;">
          <input type="text" is="core-input" name="author" on-keypress="{{ keypressHandler }}">
        </paper-input-decorator>
        <file-input id="file" required extensions='["jpg", "jpeg", "gif", "png", "bmp"]' maxFiles="1" on-change="{{ displayFile }}">
          <paper-button raised style="display: block; margin: 0 auto; width: 150px;" on-click="{{ triggerFileUpload }}">
            <core-icon icon="file-upload"></core-icon> Select File
          </paper-button>
        </file-input>
        <p id="fileName" style="text-align: center;"></p>
        <br>
      </form>
      <paper-button dismissive>Cancel</paper-button>
      <paper-button affirmative on-click="{{ submit }}">Upload</paper-button>
    </paper-action-dialog>
  </template>

  <script src="upload-dialog.js"></script>
</polymer-element>
